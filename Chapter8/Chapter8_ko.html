<!doctype html>
<html>
  <head>
    <meta charset ="utf-8">
    <title> Unix Chaper 8 Summary</title>
  </head>
  <body>
    <h1>Chapter 08 프로세스와 사용자 명령 익히기</h1>
    <div>
      <h2>프로세스 </h2>
      <ul>
        <li>실행중인 프로그램</li>
        <li>시스템 프로세스 : 유닉스 운영에 필요한 기능 수행</li>
        <li>사용자 프로세스 : 사용자들이 실행시킨 프로세스</li>
        <li>프로세스를 종료시키면 그 자식 프로세스들도 같이 종료된다.</li>
        <li>프로세스를 종료시킬 때 PID나 프로세스 이름을 알아야 한다.</li>
      </ul>
      <h3>종류</h3>
      <ul>
        <li>데몬(daemon) : 유닉스 커널에 의해 실행되는 프로세스로 특정 서비스 제공</li>
        <li>부모,자식,고아,좀비 : 부모가 자식을 만들고, 자식은 원래 부모에게 결과를 돌려준다. 만약 실행도중 부모가 종료되면 고아라고 불리고 고아 프로세스는 1번 프로세스가 새 부모이다, 부모 프로세스가 자식 프로세스가 종료됐어도 시스템 자원이 회수되지 않으면 좀비 프로세스라고 한다.</li>
      </ul>
      <h3>명령</h3>
      <ul>
        <li>프로세스 목록 보기 : ps, pgrep</li>
        <li>프로세스 종료시키기 : kill pkill</li>
        <li>포그라운드(전위) 백그라운드(후위) 작업제어 : fg,bg,jobs</li>
      </ul>
      <h3>ps 프로세스 정보를 출력</h3>
      <ul>
        <li>ps [option]</li>
        <li>process status</li>
        <li>프로세스 정보를 출력 ( pid,  터미널, cpu시간, 명령어)</li>
        <li>-e : 시스템에 있는 모든  프로세스 정보출력</li>
        <li>-f : 프로세스에 대한 자세한 정보 출력</li>
        <li>-u UID : 특정 사용자에 대한 모든 프로세스 출력</li>
      </ul>
      <h3>ps -f 의 출력정보</h3>
      <ul>
        <li>UID : 프로세스 실행시킨 사용자 ID</li>
        <li>PID : 프로세스 번호</li>
        <li>PPID : 부모프로세스 번호</li>
        <li>C : 프로세스 우선순위</li>
        <li>STIME : 프로세스 시작시간을 시:분:초  형식으로 출력</li>
        <li>TTY : 프로세스가 실행된 단말기 종류와 번호</li>
        <li>CMD : 실행되고 있는 프로그램 이름(명령)</li>
      </ul>
      <h3>pgrep 특정 프로세스 정보 검색하기 </h3>
      <ul>
        <li>pgrep [옵션] 패턴</li>
        <li>프로세스 이름으로 찾아 정보를 출력</li>
        <li>솔라리스에만 있는 특별한 명령으로</li>
        <li>ps[옵션] | grep 패턴 과 같다.</li>
        <li>-x : 패턴과 정확히 일치하는 프로세스 정보출력</li>
        <li>-n :패턴을 포함하는 가장 최근 프로세스 출력</li>
        <li>-U uid : 특정 사용자의 모든 프로세스 출력</li>
        <li>-I : PID와 프로세스 이름 출력</li>
        <li>-t term : 특정 단말기와 관련된 프로세스 정보 출력</li>
      </ul>
      <h2>kill</h2>
      <ul>
        <li>kill [ 시그널 ] pid</li>
        <li>pid로 지정한 프로세스에 시그널을 보냄</li>
        <li>시그널 지정 안하면 15번 (종료) 시그널을 보낸다.</li>
        <li>사용자의 프로세스만 종료 가능하다.</li>
        <li>관리자는 모든 프로세스 종료 가능하다.</li>
      </ul>

      <h3>종료되는 시그널</h3>
      <ul>
        <li>1 SIGHUP: 터미널 연결이 끊어진 경우에 발생 </li>
        <li>2 SIGINT  :보통 Ctrl-C에 의해 발생 </li>
        <li>9 SIGKILL :  프로세스를 강제종료 . 무시 불가</li>
        <li>15 SIGTERM : 프로세스 종료., 무시 가능,kill 명령 보내는 기본 시그널</li>
      </ul>
      <h3>프로세스 종료 pkill</h3>
      <ul>
        <li>pkill [ 시그널 ] 프로세스명</li>
        <li>프로세스의 명령이름으로 프로세스를 찾아 지정한 시그널 보냄</li>
        <li>솔라리스에만 제공</li>
        <li>사용자가 소유한 프로세스만 종료가능</li>
        <li>pkill sleep (사용예시)</li>
      </ul>
    </div>
    <div>
      <h2>프로세스 관리도구</h2>
      <h3>prstat</h3>
      <ul>
        <li> prstat [ 옵션 ]</li>
        <li> 동작중인 프로세스의 통계 정보를 출력</li>
        <li> 프로세스 정보는 일정 시간 간격으로 자동 갱신</li>
        <li> 종료 : q</li>
        <li> -a : 프로세스와 사용자에 대한 통계를 구분하여 출력</li>
        <li> -c : 중복하여 출력하지 않고, 기존 내용의 아래쪽에 새로운 정보를 출력</li>
        <li> -s 키 : 키에따라 정렬하여 출력. (키 : cpu, pri, rss, size, time)</li>
        <li> -u euid : 해당 euid에 속한 프로세스 정보만 출력</li>
        <li> -U uid : 해당 uid에 속한 프로세스 정보만 출력</li>
      </ul>
      <h3>top</h3>
      <ul>
        <li>top [ 옵션 ]</li>
        <li>주기적으로 현재 실행중인 프로세스에 대한 정보 출력</li>
        <li>솔라리스 11부터 기본 패키지로 탑재</li>
        <li>자세한 요약 정보 출력</li>
        <li>종료 : q</li>
      </ul>
    </div>
    <div>
      <h2>포그라운드와 백그라운드 작업의 이해</h2>
      <h3>작업(job)</h3>
      <ul>
        <li>쉘이 프로세스를 관리하는 단위</li>
        <li>쉘은 job을 시작시키고 제어 (Job ID 부여)</li>
        <li>유닉스의 프로세스는 포그라운드 작업과 백그라운드 작업으로 구분가능</li>
      </ul>
      <h3>포그라운드 처리</h3>
      사용자가 입력한 명령이 실행되어 결과가 출력될 때까지 프롬프트가 출력 되지 않아서 다른 명령을 입력할 수 없는 처리 방법 (보통의 처리방법)
      <h3>백그라운드 처리</h3>
      명령의 입력이 끝나면 결과에 상관없이 바로 다음 프롬프트가 출력되어 다른 명령을 입력할 수 있는 처리 방법 (명령의 끝에 & 붙임)
    </div>
    <div>
      <h2>작업제어 명령 – jobs</h2>
      <ul>
        <li>- 작업 번호를 지정하지 않으면 백그라운드 작업을 모두 출력</li>
        <li>- 특정 작업 번호를 지정하면 해당 작업의 정보만 출력</li>
      </ul>
      <h3>작업번호</h3>
      <ul>
        <li>작업 번호로 백그라운드로 실행시킬 때마다 순차적으로 증가한다.[1],[2],[3] …</li>
        <li>%번호 : 해당 번호의 작업 정보를 출력</li>
        <li>%+ 또는 %% : 작업순서가 +인 작업 정보를 출력</li>
        <li>%- : 작업 순서가 –인 작업 정보를 출력</li>
        <li>+ 는 가장 최근 접근 작업  - 는 +바로 직전에 접근한 작업</li>
        <li>작업의 상태 : Running(현재 실행중), Done(정상 종료), Terminated(비정상 종료), Stopped(정지)</li>
      </ul>
      <h3>작업 전환 및 종료 명령</h3>
      <ul>
        <li>ctrl + z 또는 stop [%작업번호] : 포그라운드 작업을 중지시킨다. (종료가 아닌 잠시 중단임)</li>
        <li>bg[%작업번호] : 작업번호가 지시하는 작업을 백그라운드 작업으로 전환시킨다.</li>
        <li>fg[%작업번호] :  작업번호가 지시하는 작업을 포그라운드 작업으로 전환시킨다.</li>
      </ul>
      <h3>nohup 명령&</h3>
      <ul>
        <li>로그아웃을 한 뒤에도 백그라운드 작업을 계속 실행 명령</li>
        <li>원래는 로그아웃하면 실행중이던 모든 작업이 종료됨</li>
        <li>실행결과와 오류메시지 : nohup.out 파일에 저장</li>
      </ul>
    </div>
    <div>
      <h2>사용자 정보 보기</h2>
      <ul>
        <li>로그인 사용자 정보보기 : users(현재 로그인하고 있는 사용자 명 출력), who(시스템 사용 사용자 정보 출력), w(사용자 정보와 현재 작업 정보 출력)</li>
        <li>사용자 자신의 정보보기 : who am i(who명령중 자신에 대한 정보만 출력), whoami(로그인 사용자 정보 출력) ,Id</li>
        <li>사용자 전환하기 : su (아무 옵션 없으면 root계정) (사용자명 지정 : 지정사용자로 변경),(- : root 혹은 지정 한 사용자의 초기화 파일이 실행되면서 작업 디렉토리도 사용자 홈 디렉토리로 변경됨)</li>
      </ul>
    </div>
  </body>
</html>
